---
layout: default
title: Math
---

<section class="hero">
  <div class="container">
    <h1>Math â•</h1>
    <p>Solve the problem and choose the correct answer. Earn â­ for correct answers!</p>

    <div class="quick-strip">
      <button class="btn secondary" id="soundBtn" type="button">ğŸ”Š Read Question</button>
      <a class="btn secondary" href="progress.html">My Progress</a>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="section-title">Quick Math Game ğŸŒŸ</h2>

    <div class="game-box wide">
      <div class="game-box">
        <p class="kid-big" id="question">Question loads hereâ€¦</p>
        <p class="small" id="hint">Hint loads hereâ€¦</p>

        <div class="grid-3" id="choices" style="margin-top:14px;"></div>

        <p class="kid-big" id="result" style="margin-top:14px;"></p>

        <div class="quick-strip">
          <button class="btn" id="nextBtn" type="button">Next</button>
          <button class="btn secondary" id="resetBtn" type="button">Reset Stars</button>
        </div>

        <p class="small" style="margin-top:10px;">Stars save on this device.</p>
      </div>
    </div>
  </div>
</section>

<script>
  const PROG_KEY = "bloom_progress";
  function loadProgress(){ try { return JSON.parse(localStorage.getItem(PROG_KEY) || "{}"); } catch { return {}; } }
  function saveProgress(p){ localStorage.setItem(PROG_KEY, JSON.stringify(p)); }

  function speak(text){
    if (!("speechSynthesis" in window)) return;
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.rate = 1;
    u.pitch = 1.05;
    speechSynthesis.speak(u);
  }

  const items = [
    { q: "5 + 3 = ?", correct: 8, choices: [7,8,9], hint:"Count up 3 from 5." },
    { q: "10 âˆ’ 4 = ?", correct: 6, choices: [6,5,7], hint:"Count back 4 from 10." },
    { q: "7 + 7 = ?", correct: 14, choices: [12,14,16], hint:"Double 7." },
    { q: "9 âˆ’ 3 = ?", correct: 6, choices: [6,7,5], hint:"Count back 3 from 9." },
    { q: "6 + 2 = ?", correct: 8, choices: [8,9,7], hint:"Add 2 more." }
  ];

  let idx = 0;

  function render(){
    const it = items[idx % items.length];
    document.getElementById("question").textContent = it.q;
    document.getElementById("hint").textContent = it.hint;
    document.getElementById("result").textContent = "";

    const choices = document.getElementById("choices");
    choices.innerHTML = "";

    it.choices.forEach(c=>{
      const card = document.createElement("div");
      card.className = "card";
      card.style.textAlign = "center";
      card.style.cursor = "pointer";
      card.innerHTML = `<h3 style="font-size:34px; margin-bottom:6px;">${c}</h3><p class="small">Tap me!</p>`;
      card.onclick = ()=> check(c, it.correct);
      choices.appendChild(card);
    });
  }

  function addStar(){
    const p = loadProgress();
    p.mathStars = (p.mathStars || 0) + 1;
    saveProgress(p);
  }

  function check(choice, correct){
    const resultEl = document.getElementById("result");
    if (resultEl.textContent) return;

    if (choice === correct){
      resultEl.textContent = "Correct! â­";
      addStar();
      speak("Correct!");
    } else {
      resultEl.textContent = "Try again ğŸ™‚";
      speak("Try again.");
    }
  }

  document.getElementById("nextBtn").onclick = ()=>{ idx++; render(); };
  document.getElementById("resetBtn").onclick = ()=>{
    const p = loadProgress();
    p.mathStars = 0;
    saveProgress(p);
    alert("Math stars reset!");
    render();
  };

  document.getElementById("soundBtn").onclick = ()=> speak(document.getElementById("question").textContent);

  render();
</script>
