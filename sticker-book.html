<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sticker Book | BloomELearning âœ¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<header>
  <div class="container">
    <div class="logo">BloomELearning âœ¨</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="phonics.html">Phonics</a></li>
        <li><a href="reading.html">Reading</a></li>
        <li><a href="math.html">Math</a></li>
        <li><a href="games.html">Character Games</a></li>
        <li><a href="resources.html">Kids Resources</a></li>
        <li><a href="letter-formation.html">Letter Tracing</a></li>
        <li><a href="sticker-book.html">Sticker Book</a></li>
        <li><a href="progress.html">My Progress</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1>ğŸ“– Sticker Book</h1>
    <p>Every time you finish tracing, you earn a sticker! Collect them all! ğŸŒˆ</p>
    <div class="game-row" style="justify-content:center;">
      <a class="btn" href="letter-formation.html">Earn More Stickers</a>
      <button class="btn secondary" id="readBtn">ğŸ”Š Read Page</button>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="section-title">My Stickers â­</h2>

    <div class="game-box wide">
      <div class="sticker-stats">
        <span class="badge" id="countBadge">ğŸ Stickers: 0</span>
        <span class="badge" id="uniqueBadge">ğŸŒŸ Unique: 0</span>
      </div>

      <div id="emptyState" class="empty-state">
        <div class="empty-emoji">ğŸ§¸</div>
        <div class="kid-big">No stickers yet!</div>
        <p class="small">Go trace a letter to earn your first sticker.</p>
        <a class="btn" href="letter-formation.html">Start Tracing</a>
      </div>

      <div id="stickerGrid" class="sticker-grid" aria-live="polite"></div>

      <div class="game-row" style="margin-top:16px;">
        <button class="btn secondary" id="clearBtn">Reset Sticker Book</button>
      </div>

      <p class="small" style="margin-top:10px;">
        This Sticker Book is saved on this device (browser storage). If you clear browser data, stickers may reset.
      </p>
    </div>
  </div>
</section>

<footer>Â© 2026 BloomELearning âœ¨ | Made with ğŸ’š</footer>

<script>
  const STICKER_KEY = "bloom_sticker_book";

  function loadStickers(){
    try {
      return JSON.parse(localStorage.getItem(STICKER_KEY) || "[]");
    } catch {
      return [];
    }
  }

  function saveStickers(list){
    localStorage.setItem(STICKER_KEY, JSON.stringify(list));
  }

  function speak(text){
    if (!("speechSynthesis" in window)) return;
    window.speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.rate = 1; u.pitch = 1.05;
    window.speechSynthesis.speak(u);
  }

  function render(){
    const stickers = loadStickers();
    const grid = document.getElementById("stickerGrid");
    const empty = document.getElementById("emptyState");

    const countBadge = document.getElementById("countBadge");
    const uniqueBadge = document.getElementById("uniqueBadge");

    countBadge.textContent = `ğŸ Stickers: ${stickers.length}`;
    const unique = new Set(stickers.map(s => s.emoji)).size;
    uniqueBadge.textContent = `ğŸŒŸ Unique: ${unique}`;

    if (stickers.length === 0){
      empty.style.display = "block";
      grid.style.display = "none";
      grid.innerHTML = "";
      return;
    }

    empty.style.display = "none";
    grid.style.display = "grid";

    // newest first
    const reversed = stickers.slice().reverse();

    grid.innerHTML = reversed.map((s) => {
      const date = new Date(s.time).toLocaleString();
      return `
        <div class="sticker-card">
          <div class="sticker-big">${s.emoji}</div>
          <div class="sticker-label"><strong>${s.item}</strong></div>
          <div class="small">â­ ${s.perfect ? "Perfect Trace" : "Great Trace"}</div>
          <div class="small">${date}</div>
        </div>
      `;
    }).join("");
  }

  document.getElementById("clearBtn").onclick = () => {
    if (confirm("Reset the Sticker Book? This removes all stickers.")){
      saveStickers([]);
      render();
    }
  };

  document.getElementById("readBtn").onclick = () => {
    const stickers = loadStickers();
    if (stickers.length === 0) {
      speak("Sticker book. No stickers yet. Go trace a letter to earn your first sticker!");
    } else {
      speak(`Sticker book. You have ${stickers.length} stickers.`);
    }
  };

  render();
</script>

</body>
</html>
