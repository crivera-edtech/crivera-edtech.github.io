<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sticker Book | BloomELearning âœ¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

<header>
  <div class="container">
    <div class="logo">BloomELearning âœ¨</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>

        <li class="dropdown">
          <a href="#">Subjects</a>
          <div class="dropdown-menu">
            <a href="phonics.html">ğŸ”¤ Phonics</a>
            <a href="reading.html">ğŸ“– Reading</a>
            <a href="math.html">â• Math</a>
            <a href="letter-formation.html">âœï¸ Letter Tracing</a>
          </div>
        </li>

        <li class="dropdown">
          <a href="#">Resources</a>
          <div class="dropdown-menu">
            <a href="resources.html">ğŸ¥ Kids Resources</a>
            <a href="parent-resources.html">ğŸ§‘â€ğŸ« Parent Resources</a>
            <a href="standards.html">ğŸ“˜ Standards (Kâ€“2)</a>
          </div>
        </li>

        <li class="dropdown">
          <a href="#">Student</a>
          <div class="dropdown-menu">
            <a href="student-login.html">ğŸ§’ Student Login</a>
            <a href="progress.html">ğŸ“Š My Progress</a>
            <a href="sticker-book.html">ğŸ“– Sticker Book</a>
          </div>
        </li>

        <li><a href="games.html">ğŸ® Games</a></li>
        <li><a href="diagnostic.html">ğŸ§  Diagnostic</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1>Sticker Book ğŸ“–</h1>
    <p id="hello">Loadingâ€¦</p>
    <div class="quick-strip">
      <a class="btn secondary" href="progress.html">ğŸ“Š My Progress</a>
      <button class="btn secondary" id="logoutBtn">ğŸšª Logout</button>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="section-title">Sticker Packs ğŸ</h2>

    <div class="grid-3">
      <div class="card" id="packPhonics">
        <h3>ğŸ”¤ Phonics Pack</h3>
        <p class="small" id="phStatus">Locked</p>
        <div class="quick-strip" style="justify-content:center;">
          <button class="btn" id="phCollectBtn">Collect Sticker</button>
        </div>
        <p class="kid-big" id="phSticker" style="margin-top:8px;"></p>
      </div>

      <div class="card" id="packReading">
        <h3>ğŸ“– Reading Pack</h3>
        <p class="small" id="rdStatus">Locked</p>
        <div class="quick-strip" style="justify-content:center;">
          <button class="btn" id="rdCollectBtn">Collect Sticker</button>
        </div>
        <p class="kid-big" id="rdSticker" style="margin-top:8px;"></p>
      </div>

      <div class="card" id="packMath">
        <h3>â• Math Pack</h3>
        <p class="small" id="maStatus">Locked</p>
        <div class="quick-strip" style="justify-content:center;">
          <button class="btn" id="maCollectBtn">Collect Sticker</button>
        </div>
        <p class="kid-big" id="maSticker" style="margin-top:8px;"></p>
      </div>
    </div>

    <div class="game-box wide" style="margin-top:16px;">
      <h2 class="section-title">My Stickers â­</h2>
      <p class="small">These save on this device.</p>

      <div class="game-box" style="margin-top:12px;">
        <p class="kid-big">Collected:</p>
        <p id="collected" style="font-size:22px; margin-top:8px;">(none yet)</p>
      </div>

      <div class="quick-strip">
        <button class="btn secondary" id="clearBtn">Clear Stickers</button>
        <a class="btn secondary" href="index.html">Back Home</a>
      </div>
    </div>

  </div>
</section>

<footer>Â© 2026 BloomELearning âœ¨ | Made with ğŸ’š</footer>

<script>
  const STUDENT_KEY = "bloom_student";
  const PROG_KEY = "bloom_progress";
  const STICKER_KEY = "bloom_stickers";

  function load(key, fallback){
    try { return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); }
    catch { return fallback; }
  }
  function save(key, obj){ localStorage.setItem(key, JSON.stringify(obj)); }

  // Gate
  const student = load(STUDENT_KEY, null);
  if (!student || !student.name){
    window.location.href = "student-login.html";
  } else {
    document.getElementById("hello").textContent = `Hello, ${student.buddy || "ğŸ¦„"} ${student.name}! Collect stickers you unlock.`;
  }

  function getProgress(){
    return load(PROG_KEY, { phonicsStars:0, readingStars:0, mathStars:0 });
  }

  function getStickers(){
    return load(STICKER_KEY, []);
  }
  function setStickers(arr){
    save(STICKER_KEY, arr);
  }

  const phonicsUnlock = 10;
  const readingUnlock = 5;
  const mathUnlock = 10;

  const phonicsStickers = ["ğŸŒŸ", "ğŸ", "ğŸ€", "ğŸ§©", "ğŸˆ"];
  const readingStickers = ["ğŸ“š", "ğŸ¦‹", "ğŸŒˆ", "ğŸ§¸", "âœ¨"];
  const mathStickers = ["â•", "ğŸ”¢", "ğŸ§ ", "ğŸ†", "â­"];

  function render(){
    const p = getProgress();
    const unlockedPh = (p.phonicsStars || 0) >= phonicsUnlock;
    const unlockedRd = (p.readingStars || 0) >= readingUnlock;
    const unlockedMa = (p.mathStars || 0) >= mathUnlock;

    document.getElementById("phStatus").textContent = unlockedPh ? "Unlocked âœ…" : `Locked â€” need ${phonicsUnlock} Phonics â­ (you have ${p.phonicsStars||0})`;
    document.getElementById("rdStatus").textContent = unlockedRd ? "Unlocked âœ…" : `Locked â€” need ${readingUnlock} Reading â­ (you have ${p.readingStars||0})`;
    document.getElementById("maStatus").textContent = unlockedMa ? "Unlocked âœ…" : `Locked â€” need ${mathUnlock} Math â­ (you have ${p.mathStars||0})`;

    document.getElementById("phCollectBtn").disabled = !unlockedPh;
    document.getElementById("rdCollectBtn").disabled = !unlockedRd;
    document.getElementById("maCollectBtn").disabled = !unlockedMa;

    document.getElementById("phCollectBtn").style.opacity = unlockedPh ? "1" : ".6";
    document.getElementById("rdCollectBtn").style.opacity = unlockedRd ? "1" : ".6";
    document.getElementById("maCollectBtn").style.opacity = unlockedMa ? "1" : ".6";

    const list = getStickers();
    document.getElementById("collected").textContent = list.length ? list.join("  ") : "(none yet)";
  }

  function collect(fromArr){
    const list = getStickers();
    const s = fromArr[Math.floor(Math.random() * fromArr.length)];
    list.push(s);
    setStickers(list);
    render();
    return s;
  }

  document.getElementById("phCollectBtn").onclick = ()=> {
    const s = collect(phonicsStickers);
    document.getElementById("phSticker").textContent = `You got: ${s}`;
  };
  document.getElementById("rdCollectBtn").onclick = ()=> {
    const s = collect(readingStickers);
    document.getElementById("rdSticker").textContent = `You got: ${s}`;
  };
  document.getElementById("maCollectBtn").onclick = ()=> {
    const s = collect(mathStickers);
    document.getElementById("maSticker").textContent = `You got: ${s}`;
  };

  document.getElementById("clearBtn").onclick = ()=>{
    setStickers([]);
    render();
    alert("Stickers cleared!");
  };

  document.getElementById("logoutBtn").onclick = ()=>{
    localStorage.removeItem(STUDENT_KEY);
    window.location.href = "student-login.html";
  };

  render();
</script>

</body>
</html>
