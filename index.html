<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BloomELearning âœ¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

<header>
  <div class="container">
    <div class="logo">BloomELearning âœ¨</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>

        <li class="dropdown">
          <a class="dropdown-toggle" href="#" aria-expanded="false">Subjects</a>
          <div class="dropdown-menu">
            <a href="phonics.html">ğŸ”¤ Phonics</a>
            <a href="reading.html">ğŸ“– Reading</a>
            <a href="math.html">â• Math</a>
          </div>
        </li>

        <li class="dropdown">
          <a class="dropdown-toggle" href="#" aria-expanded="false">Resources</a>
          <div class="dropdown-menu">
            <a href="resources.html">ğŸ¥ Kids Resources</a>
            <a href="parent-resources.html">ğŸ§‘â€ğŸ« Parent Resources</a>
            <a href="standards.html">ğŸ“˜ Standards (Kâ€“2)</a>
          </div>
        </li>

        <li class="dropdown">
          <a class="dropdown-toggle" href="#" aria-expanded="false">Student</a>
          <div class="dropdown-menu">
            <a href="student-login.html">ğŸ§’ Student Login</a>
            <a href="progress.html">ğŸ“Š My Progress</a>
            <a href="sticker-book.html">ğŸ“– Sticker Book</a>
          </div>
        </li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1>Learn & Play ğŸŒ¿âœ¨</h1>
    <p>Pick a subject and start learning fast â€” phonics, reading, math, and fun rewards!</p>

    <!-- Start Here: Grade + Subject buttons -->
    <div class="game-box wide" style="margin-top:16px;">
      <div class="kid-big" style="text-align:center;">Start Here (Pick a Grade)</div>

      <!-- Grade pills (same size) -->
      <div class="badge-row" style="justify-content:center;">
        <button class="pill active pill-lg" data-grade="K">Kindergarten</button>
        <button class="pill pill-lg" data-grade="1">Grade 1</button>
        <button class="pill pill-lg" data-grade="2">Grade 2</button>
      </div>

      <!-- Subject buttons (same size row, no Trace a Letter) -->
      <div class="quick-strip" style="justify-content:center; margin-top:14px;">
        <a class="btn btn-lg" id="startPhonics" href="phonics.html">Start Phonics</a>
        <a class="btn secondary btn-lg" id="startReading" href="reading.html">Start Reading</a>
        <a class="btn secondary btn-lg" id="startMath" href="math.html">Start Math</a>
      </div>
    </div>

    <!-- Bubbles -->
    <div class="bubbles" style="margin-top:18px;">
      <a class="bubble" href="phonics.html"><span class="emoji">ğŸ”¤</span><span class="text">Phonics</span></a>
      <a class="bubble" href="reading.html"><span class="emoji">ğŸ“–</span><span class="text">Reading</span></a>
      <a class="bubble" href="math.html"><span class="emoji">â•</span><span class="text">Math</span></a>
      <a class="bubble" href="resources.html"><span class="emoji">ğŸ¥</span><span class="text">Kids Resources</span></a>

      <a class="bubble" href="progress.html"><span class="emoji">ğŸ“Š</span><span class="text">My Progress</span></a>
      <a class="bubble" href="sticker-book.html"><span class="emoji">ğŸ“–</span><span class="text">Sticker Book</span></a>
      <a class="bubble" href="student-login.html"><span class="emoji">ğŸ§’</span><span class="text">Student Login</span></a>
      <a class="bubble" href="parent-resources.html"><span class="emoji">ğŸ§‘â€ğŸ«</span><span class="text">Parent Hub</span></a>
    </div>

  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="section-title">Todayâ€™s Mission ğŸŒŸ</h2>

    <!-- Smaller + cleaner mission layout -->
    <div class="mission game-box wide" style="max-width:920px; margin:0 auto;">
      <div class="mission-left">
        <div class="mission-item compact">
          <div class="left">
            <div class="chk" id="m1chk">âœ“</div>
            <div>Answer 2 phonics questions</div>
          </div>
          <div class="small" id="m1txt">0 / 2</div>
        </div>

        <div class="mission-item compact">
          <div class="left">
            <div class="chk" id="m2chk">âœ“</div>
            <div>Read 1 passage</div>
          </div>
          <div class="small" id="m2txt">0 / 1</div>
        </div>

        <div class="mission-item compact">
          <div class="left">
            <div class="chk" id="m3chk">âœ“</div>
            <div>Solve 2 math questions</div>
          </div>
          <div class="small" id="m3txt">0 / 2</div>
        </div>

        <div class="progressbar" style="margin-top:10px;">
          <div id="missionBar"></div>
        </div>
        <div class="small" id="missionPct" style="margin-top:6px;">0% complete</div>
      </div>

      <div class="mission-right">
        <div class="helper">
          <div class="face" id="helperFace">ğŸ¦„</div>
          <div>
            <div class="title" id="helperTitle">Unicorn Coach</div>
            <div class="msg" id="helperMsg">Pick a subject, earn stars, and unlock stickers!</div>
          </div>
        </div>

        <div class="game-box" style="margin-top:12px;">
          <div class="kid-big">Rewards Preview ğŸ</div>

          <div class="badges" style="margin-top:10px;">
            <div class="badge-tile" id="bMath">
              <div class="top">
                <div class="icon">â•</div>
                <div class="name">Math Pack</div>
              </div>
              <div class="req" id="bMathReq"></div>
            </div>

            <div class="badge-tile" id="bRead">
              <div class="top">
                <div class="icon">ğŸ“–</div>
                <div class="name">Reading Pack</div>
              </div>
              <div class="req" id="bReadReq"></div>
            </div>

            <div class="badge-tile" id="bPhonics">
              <div class="top">
                <div class="icon">ğŸ”¤</div>
                <div class="name">Phonics Pack</div>
              </div>
              <div class="req" id="bPhonicsReq"></div>
            </div>
          </div>

          <div class="quick-strip" style="margin-top:12px;">
            <a class="btn secondary" href="sticker-book.html">Open Sticker Book</a>
            <a class="btn secondary" href="progress.html">View Progress</a>
          </div>
        </div>
      </div>
    </div>

  </div>
</section>

<footer>Â© 2026 BloomELearning âœ¨ | Made with ğŸ’š</footer>

<script src="./nav.js"></script>
<script>
  // -----------------------------
  // Grade preference
  // -----------------------------
  const PREF_GRADE_KEY = "bloom_pref_grade";
  let grade = localStorage.getItem(PREF_GRADE_KEY) || "K";

  function setGrade(g){
    grade = g;
    localStorage.setItem(PREF_GRADE_KEY, g);

    document.querySelectorAll(".pill[data-grade]").forEach(b=>{
      b.classList.toggle("active", b.dataset.grade === grade);
    });

    // Pass grade in URL
    document.getElementById("startPhonics").href = `phonics.html?grade=${encodeURIComponent(grade)}`;
    document.getElementById("startReading").href = `reading.html?grade=${encodeURIComponent(grade)}`;
    document.getElementById("startMath").href = `math.html?grade=${encodeURIComponent(grade)}`;
  }

  document.querySelectorAll(".pill[data-grade]").forEach(btn=>{
    btn.onclick = ()=> setGrade(btn.dataset.grade);
  });

  // -----------------------------
  // Missions (Daily)
  // -----------------------------
  const MISSION_KEY = "bloom_daily_mission";
  const PROG_KEY = "bloom_progress";

  function todayKey(){
    const d = new Date();
    return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
  }
  function load(key, fallback){
    try { return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); }
    catch { return fallback; }
  }
  function save(key, obj){ localStorage.setItem(key, JSON.stringify(obj)); }

  function ensureMission(){
    const t = todayKey();
    let ms = load(MISSION_KEY, null);
    if (!ms || ms.date !== t){
      ms = { date: t, phonics:0, reading:0, math:0 };
      save(MISSION_KEY, ms);
    }
    return ms;
  }

  function renderMission(){
    const ms = ensureMission();

    const g1 = 2, g2 = 1, g3 = 2;

    document.getElementById("m1txt").textContent = `${Math.min(ms.phonics,g1)} / ${g1}`;
    document.getElementById("m2txt").textContent = `${Math.min(ms.reading,g2)} / ${g2}`;
    document.getElementById("m3txt").textContent = `${Math.min(ms.math,g3)} / ${g3}`;

    const done1 = ms.phonics >= g1;
    const done2 = ms.reading >= g2;
    const done3 = ms.math >= g3;

    document.getElementById("m1chk").classList.toggle("done", done1);
    document.getElementById("m2chk").classList.toggle("done", done2);
    document.getElementById("m3chk").classList.toggle("done", done3);

    const pct = Math.round(((done1?1:0)+(done2?1:0)+(done3?1:0))/3 * 100);
    document.getElementById("missionBar").style.width = pct + "%";
    document.getElementById("missionPct").textContent = `${pct}% complete`;

    const face = document.getElementById("helperFace");
    const title = document.getElementById("helperTitle");
    const msg = document.getElementById("helperMsg");

    if (pct === 100){
      face.textContent = "ğŸ‰";
      title.textContent = "Mission Complete!";
      msg.textContent = "Great job! Go grab stickers!";
    } else if (pct >= 34){
      face.textContent = "ğŸ¦‰";
      title.textContent = "Owl Helper";
      msg.textContent = "Nice work! Keep going!";
    } else {
      face.textContent = "ğŸ¦„";
      title.textContent = "Unicorn Coach";
      msg.textContent = "Pick a subject and start earning stars!";
    }
  }

  // -----------------------------
  // Badge preview (unlocks)
  // -----------------------------
  function getProgress(){
    return load(PROG_KEY, { phonicsStars:0, readingStars:0, mathStars:0 });
  }

  function renderBadges(){
    const p = getProgress();

    const mathUnlocked = (p.mathStars || 0) >= 10;
    const readUnlocked = (p.readingStars || 0) >= 5;
    const phonicsUnlocked = (p.phonicsStars || 0) >= 10;

    document.getElementById("bMath").classList.toggle("locked", !mathUnlocked);
    document.getElementById("bRead").classList.toggle("locked", !readUnlocked);
    document.getElementById("bPhonics").classList.toggle("locked", !phonicsUnlocked);

    document.getElementById("bMathReq").textContent =
      mathUnlocked ? "Unlocked âœ…" : `Unlock at 10 Math â­ (you have ${p.mathStars||0})`;

    document.getElementById("bReadReq").textContent =
      readUnlocked ? "Unlocked âœ…" : `Unlock at 5 Reading â­ (you have ${p.readingStars||0})`;

    document.getElementById("bPhonicsReq").textContent =
      phonicsUnlocked ? "Unlocked âœ…" : `Unlock at 10 Phonics â­ (you have ${p.phonicsStars||0})`;
  }

  // Init
  setGrade(grade);
  renderMission();
  renderBadges();
</script>

</body>
</html>
