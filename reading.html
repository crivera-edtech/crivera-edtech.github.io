<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Reading | BloomELearning âœ¨</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>

<header>
  <div class="container">
    <div class="logo">BloomELearning âœ¨</div>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li class="dropdown">
          <a href="#">Subjects</a>
          <div class="dropdown-menu">
            <a href="phonics.html">ğŸ”¤ Phonics</a>
            <a href="reading.html">ğŸ“– Reading</a>
            <a href="math.html">â• Math</a>
            <a href="letter-formation.html">âœï¸ Letter Tracing</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="#">Resources</a>
          <div class="dropdown-menu">
            <a href="resources.html">ğŸ¥ Kids Resources</a>
            <a href="parent-resources.html">ğŸ§‘â€ğŸ« Parent Resources</a>
            <a href="standards.html">ğŸ“˜ Standards (Kâ€“2)</a>
          </div>
        </li>
        <li class="dropdown">
          <a href="#">Student</a>
          <div class="dropdown-menu">
            <a href="student-login.html">ğŸ§’ Student Login</a>
            <a href="progress.html">ğŸ“Š My Progress</a>
            <a href="sticker-book.html">ğŸ“– Sticker Book</a>
          </div>
        </li>
        <li><a href="games.html">ğŸ® Games</a></li>
        <li><a href="diagnostic.html">ğŸ§  Diagnostic</a></li>
      </ul>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container">
    <h1>Reading ğŸ“–</h1>
    <p>Read or listen, then answer. Earn â­ and complete your mission!</p>
    <div class="quick-strip">
      <button class="btn secondary" id="readBtn">ğŸ”Š Read Passage</button>
      <a class="btn secondary" href="progress.html">My Progress</a>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">

    <h2 class="section-title">Game 1: Mini Reading Check âœ…</h2>
    <div class="game-box wide">
      <div class="game-box">
        <p class="kid-big" id="passage">Passage loads hereâ€¦</p>
        <p class="small" id="question">Question loads hereâ€¦</p>

        <div class="grid-3" id="choices" style="margin-top:14px;"></div>

        <p class="kid-big" id="result" style="margin-top:14px;"></p>

        <div class="quick-strip">
          <button class="btn" id="nextBtn">Next</button>
          <button class="btn secondary" id="resetBtn">Reset Stars</button>
        </div>

        <p class="small" style="margin-top:10px;">Earn â­ for correct answers.</p>
      </div>
    </div>

    <h2 class="section-title" style="margin-top:18px;">Game 2: Label the Picture ğŸ·ï¸</h2>
    <div class="game-box wide">
      <div class="game-box">
        <p class="small">Pick the word that matches the picture. (Pictures are emoji for now.)</p>

        <div class="card" style="text-align:center;">
          <div style="font-size:54px;" id="pic">ğŸ</div>
          <p class="kid-big" id="picPrompt">What is this?</p>
        </div>

        <div class="grid-3" id="picChoices" style="margin-top:14px;"></div>

        <p class="kid-big" id="picResult" style="margin-top:14px;"></p>

        <div class="quick-strip">
          <button class="btn" id="picNextBtn">Next Picture</button>
          <button class="btn secondary" id="picSoundBtn">ğŸ”Š Read Question</button>
        </div>
      </div>
    </div>

  </div>
</section>

<footer>Â© 2026 BloomELearning âœ¨ | Made with ğŸ’š</footer>

<script>
  const PROG_KEY = "bloom_progress";
  const MISSION_KEY = "bloom_daily_mission";

  function load(key, fallback){
    try { return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); }
    catch { return fallback; }
  }
  function save(key, obj){ localStorage.setItem(key, JSON.stringify(obj)); }

  function todayKey(){
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,"0");
    const day = String(d.getDate()).padStart(2,"0");
    return `${y}-${m}-${day}`;
  }
  function ensureMission(){
    const t = todayKey();
    let ms = load(MISSION_KEY, null);
    if (!ms || ms.date !== t){
      ms = { date: t, phonics:0, reading:0, math:0 };
      save(MISSION_KEY, ms);
    }
    return ms;
  }
  function missionAddReading(){
    const ms = ensureMission();
    ms.reading = (ms.reading || 0) + 1;
    save(MISSION_KEY, ms);
  }

  function speak(text){
    if (!("speechSynthesis" in window)) return;
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.rate = 1;
    speechSynthesis.speak(u);
  }

  function loadProgress(){
    return load(PROG_KEY, { phonicsStars:0, readingStars:0, mathStars:0 });
  }
  function saveProgress(p){ save(PROG_KEY, p); }

  // -------- Game 1: Passages --------
  const items = [
    { passage:"Mia has a red kite. She runs fast. The kite goes up, up, up!", question:"What color is Miaâ€™s kite?", correct:"Red", choices:["Blue","Red","Green"] },
    { passage:"Ben has a pet fish. He feeds it every day. The fish swims in circles.", question:"What does Ben have?", correct:"A fish", choices:["A dog","A fish","A cat"] },
    { passage:"The sun is bright. Kai puts on his hat. He goes outside to play.", question:"Why does Kai put on his hat?", correct:"The sun is bright", choices:["It is raining","The sun is bright","It is snowing"] },
    { passage:"Lena likes to read. She sits on a soft rug and turns the pages.", question:"What does Lena like to do?", correct:"Read", choices:["Swim","Read","Cook"] },
    { passage:"A dog barks at the door. The mail carrier walks away.", question:"Who was at the door?", correct:"Mail carrier", choices:["A clown","Mail carrier","A dragon"] },
    { passage:"Tom puts ice in his cup. The drink gets cold.", question:"What does the ice do?", correct:"Makes it cold", choices:["Makes it hot","Makes it cold","Makes it loud"] }
  ];

  let idx = 0;
  let answered = false;

  function render(){
    const it = items[idx % items.length];
    document.getElementById("passage").textContent = it.passage;
    document.getElementById("question").textContent = it.question;
    document.getElementById("result").textContent = "";
    answered = false;

    const choices = document.getElementById("choices");
    choices.innerHTML = "";

    it.choices.forEach(c=>{
      const card = document.createElement("div");
      card.className = "card";
      card.style.cursor = "pointer";
      card.innerHTML = `<h3 style="font-size:22px; margin-bottom:6px;">${c}</h3><p class="small">Tap me!</p>`;
      card.onclick = ()=> check(c, it.correct);
      choices.appendChild(card);
    });
  }

  function addStarAndMissionOnce(){
    // only count the first correct attempt per passage
    if (answered) return;
    answered = true;

    const p = loadProgress();
    p.readingStars = (p.readingStars || 0) + 1;
    saveProgress(p);

    missionAddReading();
  }

  function check(choice, correct){
    if (choice === correct){
      document.getElementById("result").textContent = "Correct! â­";
      addStarAndMissionOnce();
      speak("Correct!");
    } else {
      document.getElementById("result").textContent = "Try again ğŸ™‚";
      speak("Try again.");
    }
  }

  document.getElementById("nextBtn").onclick = ()=>{ idx++; render(); };
  document.getElementById("resetBtn").onclick = ()=>{
    const p = loadProgress();
    p.readingStars = 0;
    saveProgress(p);
    alert("Reading stars reset!");
  };

  document.getElementById("readBtn").onclick = ()=>{
    const it = items[idx % items.length];
    speak(`${it.passage} Question: ${it.question}`);
  };

  // -------- Game 2: Picture labeling --------
  const pics = [
    { emoji:"ğŸ", prompt:"What is this?", correct:"apple", choices:["apple","orange","hat"] },
    { emoji:"ğŸ§¦", prompt:"What is this?", correct:"sock", choices:["sock","shoe","book"] },
    { emoji:"ğŸšŒ", prompt:"What is this?", correct:"bus", choices:["bus","car","boat"] },
    { emoji:"ğŸª¥", prompt:"What is this?", correct:"toothbrush", choices:["toothbrush","spoon","pencil"] },
    { emoji:"ğŸŒ§ï¸", prompt:"What is happening?", correct:"raining", choices:["raining","snowing","sunny"] },
    { emoji:"ğŸ•", prompt:"What food is this?", correct:"pizza", choices:["pizza","salad","ice cream"] }
  ];
  let pidx = 0;
  let picAnswered = false;

  function renderPic(){
    const it = pics[pidx % pics.length];
    document.getElementById("pic").textContent = it.emoji;
    document.getElementById("picPrompt").textContent = it.prompt;
    document.getElementById("picResult").textContent = "";
    picAnswered = false;

    const wrap = document.getElementById("picChoices");
    wrap.innerHTML = "";
    it.choices.forEach(c=>{
      const card = document.createElement("div");
      card.className = "card";
      card.style.cursor = "pointer";
      card.innerHTML = `<h3 style="font-size:22px;">${c}</h3><p class="small">Tap!</p>`;
      card.onclick = ()=> checkPic(c, it.correct);
      wrap.appendChild(card);
    });
  }

  function addPicStarAndMissionOnce(){
    if (picAnswered) return;
    picAnswered = true;

    const p = loadProgress();
    p.readingStars = (p.readingStars || 0) + 1;
    saveProgress(p);

    missionAddReading();
  }

  function checkPic(choice, correct){
    if (choice === correct){
      document.getElementById("picResult").textContent = "Correct! â­";
      addPicStarAndMissionOnce();
      speak("Correct!");
    } else {
      document.getElementById("picResult").textContent = "Try again ğŸ™‚";
      speak("Try again.");
    }
  }

  document.getElementById("picNextBtn").onclick = ()=>{ pidx++; renderPic(); };
  document.getElementById("picSoundBtn").onclick = ()=>{
    const it = pics[pidx % pics.length];
    speak(it.prompt);
  };

  render();
  renderPic();
</script>

</body>
</html>
